"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79792],{308:(e,t,r)=>{r.d(t,{H:()=>c});var a=r(676534),o=r(911052),n=r(901610),s=r(524335);let i=({assetType:e,currency:t,productName:r})=>{let{getExperiment:i}=(0,s.U)();return(0,n.y)({productName:r,assetType:e})&&i(a.f.indiaPriceTest).groupName===o.IS?o.Uj:t};var d=r(233661),l=r(137197);let u=({assetType:e,currency:t,productName:r})=>{let{getExperiment:o}=(0,s.U)();return(0,l.m)({productName:r,assetType:e})&&o(a.f.canadaPriceTest).groupName===d.IS?d.BJ:t},c=({assetType:e,currency:t,productName:r})=>{let a=i({currency:t,assetType:e,productName:r}),o=u({currency:t,assetType:e,productName:r});return o!==t?o:a!==t?a:t}},3353:(e,t,r)=>{r.d(t,{J:()=>c});var a=r(532850),o=r(360662),n=r(50042),s=r(655515),i=r(119349),d=r(981278),l=r(455729);let{shutterstockBaseUrl:u}=(0,s.K)(),c=({couponCode:e,displayInlineCancellationFlow:t,additionalQueryParams:r={}})=>{let s=(0,d.useRouter)(),c=(0,o.Q)(),m=!!c?.current?.isPeacock;return(0,l.useCallback)(({orderId:o})=>{let d=(0,i.BF)({language:s.locale,baseUrl:u,pathname:(0,n.DG)({queryParams:{orderId:o,...r,...s?.query||{},...m&&{isCreativeAiOrder:"true"},...e?{[a.m]:e,[a.AW]:e}:{},...t&&{display:"inlineCancellationFlow"}}})});window.location=d},[e,m,s,t,r])}},113930:(e,t,r)=>{r.d(t,{CM:()=>c,FH:()=>C,GA:()=>y,ME:()=>h,YH:()=>f,jj:()=>b,tb:()=>m,zM:()=>p});var a=r(315888),o=r(398426),n=r(813631),s=r(485650),i=r(302168),d=r(559044);let l=({licenses:e,selectedPaymentPlan:t})=>e?.some(({product:e})=>e?.name===t?.product?.name),u=({asset:e,licenses:t})=>{let r=n.xu[e.type];return t?.some(({licenseName:e,product:t})=>(e===s.PtZ[r]||e===s.or1[r]||e===s.MQK[r])&&[...a.XqP,...o.Hg,...o.Gn,a.lcL,a.keR,a.rJW].includes(t?.name||""))},c=({asset:e,licenses:t,selectedPaymentPlan:r})=>l({licenses:t,selectedPaymentPlan:r})||u({asset:e,licenses:t}),m=({licenses:e,licenseTypes:t})=>{let{standard:r,enhanced:a}=t;return e.reduce((e,t)=>{let{licenseName:o}=t;return o===r&&(e.ownsStandardLicense=!0),o===a&&(e.ownsEnhancedLicense=!0),e},{ownsStandardLicense:!1,ownsEnhancedLicense:!1})},p=({subscriptions:e=[],licenseName:t=""})=>e?.some(({license:e,isEligibleForDownload:r})=>e===t&&r),y=(e,t,r)=>(0,i.eO)(e,t[r]),C=({asset:e,ownsStandardLicense:t,ownsEnhancedLicense:r,selectedProductLicenseType:a})=>{let o=n.xu[e.type];return t&&a?.license===s.or1[o]||r&&[s.or1[o],s.PtZ[o]].includes(a?.license||"")},b=({asset:e,selectedPaymentPlan:t,subscriptions:r})=>{let a=n.xu[e.type];return t&&"isPaused"in t?t.isPaused:r?.filter(({license:e})=>e===s.or1[a]||e===s.PtZ[a])?.some(({isPaused:e})=>e)},h=({licenses:e})=>e?.some(({licenseName:e})=>Object.values(s.PtZ).includes(e))??!1,f=(e,t,r)=>(0,d.$9)(e)?s.rTe:[a.ZI1,s.$am].includes(r?.license||"")?s.PtZ[t]:s.or1[t]},137197:(e,t,r)=>{r.d(t,{m:()=>c});var a=r(581298),o=r(430091),n=r(813400),s=r(315888),i=r(813631),d=r(233661);let l=({assetType:e,productName:t,utmMedium:r,region:a,inUnlimitedExperience:o})=>{let l=!t||[s.keR,s.lcL,...s.gnm,...s.BfY].includes(t),u=!e||e===i.W1,c=d.rK.includes(r??"");return!!(a===n.u3&&!c&&!o&&l&&u)};var u=r(184905);let c=({productName:e,assetType:t})=>{let r=(0,u.H)(),{region:n}=(0,a.Y)(),{utmMedium:s}=(0,o.Y)();return l({productName:e,utmMedium:s,inUnlimitedExperience:r,region:n,assetType:t})}},236599:(e,t,r)=>{r.d(t,{X:()=>v});var a=r(648973),o=r(969185),n=r(705992),s=r(532850),i=r(581298),d=r(664029),l=r(935271),u=r(302168),c=r(559044),m=r(3353),p=r(346504),y=r(377981),C=r(819254),b=r(524335),h=r(455729);let f=({asset:e,assetSize:t,couponCode:r,license:f,products:N,productId:g,productOverride:w,productType:v=s.PZ,setCreateOrderStatus:P,setIsInvalidCoupon:k,forceLocaleCurrency:O=!1})=>{let{region:_}=(0,i.Y)(),x=(0,C.o)(),[A,I]=(0,h.useState)(!1),D=(0,h.useMemo)(()=>w??{...(0,u.eO)(N,g)},[w,g,N]),E=(0,p.wb)({prices:D?.prices??{},forceLocaleCurrency:O}),{checkGate:U}=(0,b.U)(),M=U(o.M5),S=(0,h.useCallback)(e=>{let t={component:"useCreateAnonymousOrder.ts",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateAnonymousOrder",errorTitle:e.title,msg:"CON-21: Anonymous order creation failed",referrerPath:window.location.pathname,referrerQuery:window.location.search,anonymousId:x};window.NREUM?.noticeError?.(e,t)},[x]),L=(0,m.J)({couponCode:r}),T=(0,y.h)(),[R,F]=(0,h.useState)({status:"",error:void 0});return{createOrderHandler:(0,h.useCallback)(async()=>{try{P?.({status:"",error:void 0}),F({status:"",error:void 0}),I(!0);let o=e?{assets:[{asset:e,selectedAssetSize:(0,d.aZ)({assetType:(0,c.f0)(e),assetSize:t})}]}:{},s=[];s.push({...o,product:D,productType:v});let{data:i}=await (0,l.fS)({country:_,currency:E,orderItems:s,couponCode:r,license:f,isClickToCancelARGateEnabled:M,configs:{headers:{[n.DF]:x,[n.s4]:n.o}}});P?.({status:a.qO,error:void 0}),F({status:a.qO,error:void 0}),I(!1),L({orderId:`shutterstock.${i.id}`}),T({actionName:"CON-64 - anonymous order creation success",customAttributes:{productName:D.name,productType:v,country:_,currency:E,assetType:(0,c.f0)(e),assetSize:t,license:f}}),I(!1)}catch(e){P?.({status:a.Nz,error:e}),F({status:a.Nz,error:e}),I(!1),e?.detail?.toLowerCase()===s.s_&&k?.(!0),S(e)}},[x,e,t,r,_,E,M,f,D,v,T,L,S,P,k]),isCreateOrderInProgress:A,product:D,orderStatus:R}};var N=r(282881),g=r(30721),w=r(911449);let v=e=>{let{assets:t=[],cartItemsCount:r,isCartOrder:a,...o}=e,n=(0,g.i9)(),{checkGate:s}=(0,b.U)(),i=(0,N.N)({assets:a?t:void 0,product:a?void 0:o.productOverride,checkGate:s}),d=r&&r>15,l=(0,h.useMemo)(()=>({...o,asset:t[0]?.mediaItem||o.asset}),[o,t]),u=(0,w.s)(l),c=f(l),m=u.isCreateOrderInProgress||c.isCreateOrderInProgress||e.standardMultiOrderHookResult?.isCreateOrderInProgress||e.anonymousMultiOrderHookResult?.isCreateOrderInProgress,p=(0,h.useCallback)(({isEligibleForAnonCheckout:t})=>n||!t?a?e.standardMultiOrderHookResult:u:a?d||i?e.standardMultiOrderHookResult:e.anonymousMultiOrderHookResult:i?u:c,[n,a,i,c,u,d,e.anonymousMultiOrderHookResult,e.standardMultiOrderHookResult]);return{getCreateOrderHandler:(0,h.useCallback)(({isEligibleForAnonCheckout:e=!1})=>({createOrderHandler:p({isEligibleForAnonCheckout:e}).createOrderHandler}),[p]),isCreateOrderInProgress:m,hasActivePromos:i,cartSizeExceedsAnonymousLimit:d,createOrderHandlerLoading:u.createOrderHandlerLoading}}},262139:(e,t,r)=>{r.r(t),r.d(t,{BuyAndDownloadButton:()=>v,getAnalyticsLabel:()=>w});var a=r(406029),o=r(464839),n=r(215075),s=r(926114),i=r(291753),d=r(517596),l=r(811401),u=r(513372),c=r(727326),m=r(532850),p=r(670283),y=r(882431),C=r(236599),b=r(461266),h=r(568880),f=r(455729);let N=(0,r(807703).n9)()(({tokens:{spacing:e}})=>({buttonProgress:{position:"absolute"},downloadButton:{marginTop:e.base}})),g=({t:e})=>({buyAndDownload:e("activation-drawers:pricing_checkout_download_label")}),w=({product:e,selectedProductLicenseType:t,hasActiveMembershipSub:r})=>{let{license:a}=t,{name:o}=e;if(a&&o){let e=`${c.lnH} - ${a}License - ${o}`;return`${r?`${e} - ${i.jQ}`:e}`}return c.lnH},v=({asset:e,assetSize:t,couponCode:r="",isDisabled:v=!1,product:P,productType:k=m.PZ,selectedProductLicenseType:O=b.vB,setCreateOrderStatus:_=b.lQ,selectedShadowsOption:x,vatNumber:A,eligibilityData:I=b.vB,labelText:D,membershipProps:E=b.vB})=>{let{isEligibleForEnhanceLicensingSingleAsset:U}=(0,d.r)(),{classes:M}=N(),[S,L]=(0,f.useState)(!1),{t:T,ready:R}=(0,h.Bd)(s.sVY),F=g({t:T}),{license:H}=O,{hasActiveMembershipSub:z}=E,B={orderFlow:y.Y.LICENSING_DRAWER,asset:e,assetSize:t,couponCode:r,productOverride:P,productType:k,vatNumber:A,setCreateOrderStatus:_,selectedShadowsOption:x,license:H,isLicenseDrawer:!0,eligibilityData:I},j=(0,p.T)(),{getCreateOrderHandler:Y,isCreateOrderInProgress:Z}=(0,C.X)(B),$=Z||!R||v||!S,G=U?c.Bni:w({product:P,selectedProductLicenseType:O,hasActiveMembershipSub:z}),J=z?i.DB:D;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.l,{asset:e,isTermsChecked:S,setTermsCheckbox:L}),(0,a.jsxs)(u.$n,{"aria-label":J||F.buyAndDownload,"data-automation":`${J||c.lnH}_button`,variant:"contained",color:"secondary",onClick:()=>{let{isEligibleForCon64AnonymousCheckoutExperiment:e}=j(),{createOrderHandler:t}=Y({isEligibleForAnonCheckout:e});t()},fullWidth:!0,disabled:$,labelTrack:G,className:M.downloadButton,children:[Z&&(0,a.jsx)(o.A,{color:"inherit",size:24,className:M.buttonProgress}),J||(R?F.buyAndDownload:(0,a.jsx)(n.A,{variant:"text",width:"100%"}))]})]})}},282881:(e,t,r)=>{r.d(t,{N:()=>s});var a=r(315888),o=r(969185);let n=[{condition:({assets:e,checkGate:t})=>(e?.some(({product:e})=>e?.name===a.rVp)??!1)&&(t?.(o.gx)??!1)},{condition:({product:e,checkGate:t})=>e?.name===a.rVp&&(t?.(o.gx)??!1)},{condition:({product:e})=>!!e?.promotions}],s=({assets:e,product:t,checkGate:r})=>n.some(a=>a.condition({assets:e,product:t,checkGate:r}))},291753:(e,t,r)=>{r.d(t,{DB:()=>u,TE:()=>p,a_:()=>c,ay:()=>i,cy:()=>l,e7:()=>d,jQ:()=>m,lY:()=>o,rY:()=>s,vB:()=>n});var a=r(315888);let o="LICENSING",n="LOADING",s="PURCHASING",i="none",d={[a.zWM]:2,[a.InX]:5,[a.gtC]:25,[a.W_1]:2,[a.HCH]:5,[a.xh8]:25},l="Download for free",u="Download",c="Tier100",m="NonTier100",p="eligibilityErrorNoEligibility"},346504:(e,t,r)=>{r.d(t,{JA:()=>h,Up:()=>y,Z0:()=>C,bV:()=>N,dV:()=>b,eb:()=>f,kI:()=>p,wb:()=>c});var a=r(9549),o=r(485650),n=r(831664),s=r(581298),i=r(308),d=r(302168),l=r(198795),u=r(455729);let c=({prices:e,name:t,forceLocaleCurrency:r})=>{let{currencyData:{currency:o=a.OS}}=(0,s.Y)(),n=(0,i.H)({productName:t,currency:o});return(0,d.zn)({prices:e,localeCurrency:n,forceLocaleCurrency:r})},m=({basePrice:e,pricePerSeat:t,seatCount:r})=>e?e+t*r:NaN,p=({product:e})=>{let{prices:t={},pricesPerSeat:r={},seatCount:a,downloadCredits:o,allotmentCredits:n,commitmentLength:s,name:i}=e,d=c({prices:t,name:i}),u=t[d?.toLowerCase()]??NaN,p=r[d?.toLowerCase()]??NaN,y=u,C=n||o;return p&&a&&(y=m({basePrice:u,pricePerSeat:p,seatCount:a})),(0,l.f)(y/(C&&1===s?12*C:C||1),d)??void 0},y=({product:e,promotion:t=0})=>{let{prices:r={},pricesPerSeat:a={},seatCount:o,name:n}=e||{},s=c({prices:r,name:n}),i=r[s?.toLowerCase()]??NaN,d=a[s?.toLowerCase()],u=i;return t>0&&(u=Math.round(i*(1-t))),d&&o&&(u=m({basePrice:i,pricePerSeat:d,seatCount:o})),(0,l.f)(u,s)},C=({activeTab:e,productGroup:t,productToCompare:r=n.XN})=>{let{prices:a}={prices:{}},o=c({prices:a}),{products:s={}}=t,i=s[e],d=12*(i?.[r]?.prices?.[o?.toLowerCase()]??NaN)-(i?.[n.Ww]?.prices?.[o?.toLowerCase()]??NaN),u=(0,l.f)(d,o);return d>0?u:null},b=({price:e,product:t})=>{let{prices:r,name:a}=t,o=c({prices:r,name:a}),n=e||r[o?.toLowerCase()]||0;return(0,l.f)(n,o)},h=({product:e,downloadsPerMonth:t,discountPercentage:r=0,selectedProductLicenseType:a=""})=>{let n=c({prices:e?.prices??{},name:e?.name}),{pricePerPaymentInterval:s,pricePerMonth:i,pricePerAsset:m,pricePerAssetDiscounted:p,priceDiscounted:y}=(0,u.useMemo)(()=>{let s=(0,d.f8)({product:e??{}}),i=(0,d.Eu)({product:e}),l=a===o.ZI1,u=2*!["KRW","JPY"].includes(n),c=(0,d.Fj)({product:e??{}}),m=c&&!i?12:1,p=e?.prices?.[n.toLowerCase()]??NaN,y=p-p/100*r,C=c?(p/12).toFixed(u):p,b=l?(e?.allotmentCredits||0)/20:e?.allotmentCredits??NaN,h=(p/m/((s?b:e?.allotmentCredits)??NaN)).toFixed(u),f=r?(y/m/(e?.allotmentCredits??t??NaN)).toFixed(u):h;return{priceDiscounted:y,pricePerMonth:C,pricePerAsset:h,pricePerAssetDiscounted:f,pricePerPaymentInterval:p}},[n,t,e,r,a]);return{pricePerAsset:m,formattedPricePerPaymentInterval:(0,l.f)(s,n),formattedPricePerMonth:(0,l.f)(i,n),formattedPricePerAsset:(0,l.f)(m,n),formattedPricePerAssetDiscounted:(0,l.f)(p,n),formattedPriceDiscounted:(0,l.f)(y,n)}},f=({product:e,singleClipProduct:t})=>{let{prices:r,allotmentCredits:a}=e,o=c({prices:r}),n=r[o.toLowerCase()]??NaN,s=t?.prices?.[o.toLowerCase()]??NaN,i=(n/(a??NaN)).toFixed(2),d=((s-parseFloat(i))*(a??NaN)).toFixed(0);return{formattedPackagePrice:(0,l.f)(n,o),formattedPricePerAsset:(0,l.f)(i,o),formattedSaveAmount:(0,l.f)(d,o)}},N=({prices:e={},commitmentRemaining:t=0})=>{let r=c({prices:e}),a=e[r?.toLowerCase()]??NaN;return{monthlyPrice:(0,l.f)(a,r),totalRemainingPrice:(0,l.f)(a*t,r)}}},426774:(e,t,r)=>{r.d(t,{l:()=>o});var a=r(651642).Buffer;let o=e=>{let t=JSON.stringify(e);return a.from(t).toString("base64")}},517596:(e,t,r)=>{r.d(t,{Y:()=>o,r:()=>n});var a=r(455729);let o=(0,a.createContext)({isEligibleForEnhanceLicensingSingleAsset:!1}),n=()=>(0,a.useContext)(o)},670283:(e,t,r)=>{r.d(t,{T:()=>i});var a=r(676534),o=r(30721),n=r(524335),s=r(455729);let i=({disableEntryPoint:e=!0}={})=>{let{getExperiment:t}=(0,n.U)(),r=(0,o.i9)();return(0,s.useCallback)(()=>{if(r||e)return{isEligibleForCon64AnonymousCheckoutExperiment:!1};let o=t(a.f.signUpOnCheckout);return{isEligibleForCon64AnonymousCheckoutExperiment:1===Number(o?.get("variant",0))}},[t,r,e])}},739628:(e,t,r)=>{r.r(t),r.d(t,{BuyAndDownloadButton:()=>f});var a=r(406029),o=r(464839),n=r(513372),s=r(532850),i=r(808059),d=r(113930),l=r(926114),u=r(568880);let c=({price:e,resolution:t})=>{let{t:r}=(0,u.Bd)(l.sVY);return r("video_otp_primary_cta_dynamic_label",{PRICE:e,RESOLUTION:t?.toUpperCase()})};var m=r(670283),p=r(882431),y=r(236599),C=r(346504),b=r(30721),h=r(52492);let f=({asset:e,assetSizeStateId:t,assetType:r,buttonConfig:l={showIcon:!0,variant:"contained",color:"secondary",style:{marginBottom:"8px"}},clickAnalyticsLabel:u,clickAnalyticsLabelMap:f,label:N,orderFlow:g=p.Y.UNLIMITED_CONVERSION_PANEL,product:w,productStateId:v,setStateOnLoggedOutClick:P,termsCheckboxStateId:k,shouldUseSignupModal:O=!0,showDynamicLabelForOtpCta:_=!1})=>{let x=(0,b.i9)(),{setStates:A}=(0,i.h6)(),I=(0,i.Cw)(t),D=(0,i.Cw)(k??"")??!0,E=(0,i.Cw)(v??"")??w,U=(0,d.YH)(e,r,E),M=(0,C.Up)({product:E}),S=c({resolution:I?.resolution,price:M}),L=(0,m.T)({disableEntryPoint:!1}),T={orderFlow:g,productType:s.PZ,asset:e,productOverride:E,shouldForceAsset:!0,assetSize:I,license:U},{getCreateOrderHandler:R,isCreateOrderInProgress:F,createOrderHandlerLoading:H}=(0,y.X)(T),z=F||H||!D,B=_?S:N;return(0,a.jsxs)(n.$n,{"aria-label":B,disabled:z,fullWidth:!0,onClick:()=>{let{isEligibleForCon64AnonymousCheckoutExperiment:e}=L(),{createOrderHandler:t}=R({isEligibleForAnonCheckout:e});x||!O||e?t():A(P)},labelTrack:f?.[E?.name||""]||u,variant:l.variant,color:l.color,style:l.style,children:[F&&(0,a.jsx)(o.A,{color:"inherit",size:24,style:{position:"absolute"}}),l.showIcon&&(0,a.jsx)(h.Download,{style:{padding:"2px",marginRight:"4px"}}),B]})}},808059:(e,t,r)=>{r.d(t,{kN:()=>l,h6:()=>p,$w:()=>m,Cw:()=>c});var a=r(406029),o=r(467889);let n=(e,t)=>(0,o.y)()(r=>({...e,analytics:{...t},actions:{setStates:e=>r(t=>({...t,...e})),setState:(e,t)=>r(r=>({...r,[e]:t}))}}));var s=r(455729),i=r(565317);let d=(0,s.createContext)(null),l=e=>{let{children:t,initialState:r,analytics:o}=e,[i]=(0,s.useState)(()=>n(r,o));return(0,a.jsx)(d.Provider,{value:i,children:t})},u=e=>{let t=(0,s.useContext)(d);if(!t)throw Error("useConversionPanelStore must be used within CounterStoreProvider");return(0,i.P)(t,e)},c=e=>u(t=>t[e]),m=()=>u(e=>e.analytics?.planViewed),p=()=>u(e=>e.actions)},811401:(e,t,r)=>{r.d(t,{l:()=>m});var a=r(406029),o=r(571024),n=r.n(o);let s=n()(()=>r.e(44103).then(r.bind(r,639846)).then(e=>({default:e.EditorialTerms})),{loadableGenerated:{webpack:()=>[639846]},ssr:!1});var i=r(215075);let d=n()(()=>r.e(56895).then(r.bind(r,725831)).then(e=>({default:e.GeneratedAssetTerms})),{loadableGenerated:{webpack:()=>[725831]},ssr:!1,loading:()=>(0,a.jsx)(i.A,{height:"126px",variant:"rectangular",sx:{marginTop:"8px"}})});var l=r(495060),u=r(580030),c=r(455729);let m=({asset:e,isTermsChecked:t=!1,setTermsCheckbox:r,showContributorDetails:o=!0})=>{let n=(0,u.OK)(e),i=(0,l.iu)(e);return((0,c.useEffect)(()=>{n||i||r(!0)},[n,i,r]),n)?(0,a.jsx)(s,{asset:e,isTermsChecked:t,onCheckboxChange:r,showContributorDetails:o}):i?(0,a.jsx)(d,{isTermsChecked:t,onCheckboxChange:r}):null}},813400:(e,t,r)=>{r.d(t,{AV:()=>o,BR:()=>m,CU:()=>h,GS:()=>a,J8:()=>f,Ji:()=>l,L2:()=>d,ON:()=>c,R8:()=>n,RD:()=>u,TJ:()=>y,pp:()=>p,u3:()=>C,ye:()=>b,zm:()=>s,zz:()=>i});let a={country:"country",address1:"address1",address2:"address2",city:"city",state:"state",zip:"zip"},o={ccname:"ccname",bin:"bin",lastFour:"lastFour",brand:"brand",encryptedCardNumber:"encryptedCardNumber",encryptedCardType:"encryptedCardType",encryptedExpiryMonth:"encryptedExpiryMonth",encryptedExpiryYear:"encryptedExpiryYear",encryptedSecurityCode:"encryptedSecurityCode"},n={...a,name:"name"},s={ddname:"ddname",ddiban:"ddiban",ddbic:"ddbic"},i="Adyen3DSAuth",d="credit_card",l="direct_debit",u="sepa_direct_debit",c="paypal",m=/^\d{5}(-\d{4})?$/,p="rejected:Declined: CVC Declined",y={[d]:o,[l]:s},C="CA",b=[C],h="shutterstock",f={ORGANIZATION:"organization",CUSTOMER:"customer"}},901610:(e,t,r)=>{r.d(t,{y:()=>l});var a=r(581298),o=r(430091),n=r(315888),s=r(813631),i=r(911052);let d=({assetType:e,productName:t,utmMedium:r,region:a})=>{let o=!t||[n.keR,n.lcL,...n.gnm,...n.BfY].includes(t),d=!e||e===s.W1,l=i.rK.includes(r??"");return!!(a===i.r4&&!l&&o&&d)},l=({productName:e,assetType:t})=>{let{region:r}=(0,a.Y)(),{utmMedium:n}=(0,o.Y)();return d({productName:e,utmMedium:n,region:r,assetType:t})}},901897:(e,t,r)=>{r.d(t,{$:()=>d});var a=r(487519),o=r(287307),n=r(531950),s=r(884378),i=r(12482);let d=({queryParams:e={},shouldFetch:t=!0}={})=>{let r=(0,a.uy)({queryParams:e}).formattedUrl;return(0,i.I)((0,o.Rt)({enabled:t,queryKey:["getUserPaymentProfiles",r],queryFn:()=>n.Bn.get(r).then(e=>(0,s.A)(e.data))}))}},911052:(e,t,r)=>{r.d(t,{IS:()=>o,Uj:()=>a,r4:()=>n,rK:()=>s});let a="INR",o="Test",n="IN",s=["cpc","acq_display","email","affiliate"]},911449:(e,t,r)=>{r.d(t,{s:()=>H});var a=r(315888),o=r(648973),n=r(754725),s=r(969185),i=r(705992),d=r(353420),l=r(532850),u=r(581298),c=r(664029),m=r(935271),p=r(302168),y=r(559044),C=r(951411),b=r(30721);let h=({asset:e,productName:t,isBogoPromotionActive:r=!1})=>{let o=(0,C.J)(),n=(0,b.i9)(),s=(0,y.sY)(e);return(o?.isFBA||!n)&&!s&&r&&t===a.uyi};var f=r(426774),N=r(529862),g=r(262593),w=r(901897),v=r(3353),P=r(346504),k=r(120638),O=r(293733),_=r(377981),x=r(819254),A=r(631549),I=r(856297),D=r(323982),E=r(524335),U=r(962316);let{NODE_CONFIG_ENV:M}=r(929143).env,S=()=>{let e=(0,U.NF)()?"production":"qa";switch(M||e){case"dev":return"65021";case"qa":return"12424";case"production":return"14156";default:return"NO_ENV_DEFINED"}};var L=r(811407),T=r(946887),R=r(981278),F=r(455729);let H=({products:e,asset:t,assetSize:r,couponCode:C,productId:U,productType:M=l.PZ,productOverride:H,seatCount:z,setCreateOrderStatus:B,setIsInvalidCoupon:j,vatNumber:Y,license:Z,isLicenseDrawer:$=!1,preset:G,eligibilityData:J={},existingUserRedirectPath:V,selectedShadowsOption:q,shouldForceAsset:K=!1,subscriptionIdentifier:W,cancellationReason:Q,additionalCheckoutQueryParams:X,orderFlow:ee,checkoutAction:et,forceLocaleCurrency:er=!1})=>{let{region:ea}=(0,u.Y)(),{isIndiaRegion:eo}=(0,O.Z)(),{data:en}=(0,b.rA)(),{data:es}=(0,A.J)(),ei=(0,b.i9)(),ed=(0,x.o)(),[el,eu]=(0,F.useState)(!1),[,ec]=(0,D.p)(t)||[],{eligibilityCurrency:em,debitableIdentifier:ep}=J,ey=(0,I.Jz)()||(0,L.vb)(),{checkGate:eC}=(0,E.U)(),eb=eC(s.M5),eh=(0,F.useMemo)(()=>H??{...(0,p.eO)(e,U),...z?{seatCount:z}:{}},[H,U,e,z]),ef=eh?.id,{asPath:eN}=(0,R.useRouter)(),eg=(0,P.wb)({prices:eh?.prices??{},name:eh?.name,forceLocaleCurrency:er}),{data:ew}=(0,w.$)({shouldFetch:!!ei}),ev=h({asset:t,productName:eh.name}),eP=C||eh.couponCode,ek=(0,k.Rt)({cookies:void 0,signUpView:void 0,queryParams:{landing_page:(0,g.$)({couponCode:eP,productId:ef,vatNumber:Y,seatCount:eh?.seatCount,doNotRedirect:!0,asset:eo||K?t:void 0,existingUserRedirect:V||ec,license:Z,additionalGenerateCheckoutParams:X,promotions:eh?.promotions}),...G&&{preset:G}}}),eO=(0,F.useCallback)(()=>{window&&(T.A.set(n.uc,eN),window.NREUM?.addPageAction?.("UP3-1623 assign loggedOutHandler authRedirectPath to href",{...window.location||{},asPath:eN,authRedirectPath:ek}),window.location.href=ek)},[eN,ek]),e_=(0,m.Z5)({paymentProfiles:ew}),ex=(0,F.useCallback)(e=>{let t={createTime:en?.createTime,component:"useCreateOrder.js",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateOrder",errorTitle:e.title,impersonatorId:es?.impersonatorId,msg:"UP1-2650 Order creation failed",organizationId:en?.organizationId,referrerPath:window.location.pathname,referrerQuery:window.location.search,userId:en?.id,username:en?.username,isLicenseDrawer:$};window.NREUM?.noticeError?.(e,t)},[es,en,$]),eA=(0,v.J)({additionalQueryParams:{...X,...et&&{checkoutAction:et}},couponCode:eP}),eI=(0,_.h)(),[eD,eE]=(0,F.useState)({status:"",error:void 0}),eU=(0,F.useCallback)(async()=>{try{if(B?.({status:"",error:void 0}),eE({status:"",error:void 0}),eu(!0),ew){let e=t?{assets:[{asset:t,selectedAssetSize:(0,c.aZ)({assetType:(0,y.f0)(t),assetSize:r})}]}:{},n=[];n.push({...e,product:eh,productType:M});let l=eh.name===a.rVp,u=eC(s.gx),p=l&&u?(0,f.l)(d.ju[a.rVp]):void 0;null!=Q&&null!=W&&n.push({product:{id:S(),type:"products"},cancellationReason:Q,subscriptionIdentifier:W});let{headers:C}=(0,N.H)({trackingId:ey,headers:{[i.DF]:ed}})||{},{data:b}=await (0,m.fS)({country:ea,currency:em||eg,paymentProfileId:e_?.paymentId,orderItems:n,selectedShadowsOption:q,vatNumber:Y,couponCode:eP,promotions:eh?.promotions??p,license:Z,debitableIdentifier:ep,configs:{headers:C},isEligibleForUnlimitedBogoPromotion:ev,isClickToCancelARGateEnabled:eb,isFootageSelect:!!t&&(0,y.ex)(t)});eI({actionName:"convert - order creation success",customAttributes:{productName:eh.name,productType:M,country:ea,currency:em||eg,assetType:(0,y.f0)(t),assetSize:r,license:Z,isLicenseDrawer:$,orderFlow:ee,couponCode:eP,orderId:b.id}}),B?.({status:o.qO,error:void 0}),eE({status:o.qO,error:void 0}),eu(!1),eA({orderId:b.id})}eu(!1)}catch(e){B?.({status:o.Nz,error:e}),eE({status:o.Nz,error:e}),eu(!1),e?.detail?.toLowerCase()===l.s_&&j?.(!0),ex(e)}},[B,ew,t,r,eh,M,eC,Q,W,ey,ed,ea,em,eg,e_?.paymentId,q,Y,eP,Z,ep,ev,eb,eI,$,ee,eA,ex,j]);return{createOrderHandler:ei?eU:eO,isCreateOrderInProgress:el,product:eh,orderStatus:eD,createOrderHandlerLoading:ei&&!ew}}},935271:(e,t,r)=>{r.d(t,{NM:()=>_,fS:()=>k,Z5:()=>w});var a=r(487519),o=r(914689),n=r(315888),s=r(392684),i=r(532598),d=r(338436),l=r(813631),u=r(532850),c=r(398426);let m=(e,t=!1)=>{let r,[a]=e,{media:o,...s}=a,i=o?.[0]||{};switch(i.type){case l.W1:r=`${n.lcL}-var-0004`;break;case l.FY:r=c.eJ;break;case l.M9:r=c.Xs;break;case l.G_:r=n.t8m[i.size],t&&(r=n.fV_);break;default:return e}return[{...s,media:[]},{product:{id:r,type:u.Uy},media:[i]}]};var p=r(353420),y=r(426774);let C=()=>(0,y.l)(p.ju[n.uyi]);var b=r(559044),h=r(531950),f=r(884378);let N="production"!==r(929143).env.NODE_CONFIG_ENV,g=e=>{switch(e.paymentMethod){case o.L2:return{paymentId:e.id,expirationMonth:e?.creditCard?.expMonth,expirationYear:e?.creditCard?.expYear,maskedNumber:e?.creditCard?.maskedNumber,cardType:e?.creditCard?.type,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case o.RD:return{paymentId:e.id,bic:e?.sepaDirectDebit?.bic,maskedIBAN:e?.sepaDirectDebit?.maskedIban,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case o.ON:return{paymentId:e.id,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit,email:e.email};default:return null}},w=({paymentProfiles:e=[]})=>Array.isArray(e)&&0!==e.length?g(e.find(e=>!0===e.isDefault)||e[0]):null,v=({orderItems:e=[],license:t,country:r="",debitableIdentifier:a,selectedShadowsOption:c,isClickToCancelARGateEnabled:m=!1})=>e.map(e=>{let{product:{id:p,eligibleForRebilling:y,seatCount:C,name:h=""}={},productType:f,assets:N,paymentMethod:g,subscriptionIdentifier:w,cancellationReason:v,cancellationReasonName:P}=e,k=w&&v?{subscription_identifier:w,cancellation_reason:v,...P&&{cancellation_reason_name:P}}:{},O=[];return C&&(k.seat_count=C),g?.type!==o.gU&&(k.subscription_id=g?.id),N?.length&&(O=N.map(({asset:e,selectedAssetSize:r})=>{let a=(0,b.Ub)(e),o=(0,b.OJ)(e);return{type:a,id:e.id,license:t,...o&&{format:d.mx,size:d.mx,headline:e.title},...r?.size&&{size:r.size},...r?.format&&{format:r.format},...a===l.W1&&e.imageType===l.m$&&{angle:e.angle||s.R,content_provider:l._Y,...r?.format!==i.yC&&{include_shadows:"on"===(c||"on").toLocaleLowerCase()}}}})),k.auto_renewal=y&&f===u.PZ&&!n.F7K.includes(r)&&!n.KGB.includes(h),k.debitable_identifier=a,m&&n.Khw.includes(h)&&(k.auto_refill=!1),{product:{id:p,type:f||u.Uy},...O&&{media:O},...Object.keys(k).length>0&&{meta:k}}}),P=({currency:e,country:t,paymentProfileId:r,items:a,couponCode:o,vatNumber:n,promotions:s})=>({data:{type:"orders",attributes:{currency:e,items:a,country:t,payment_profile_id:r,coupons:o?[{type:"coupon",name:"coupon",coupon_code:o}]:[],client_data:{},vat_override:n||void 0,...s&&{promotions:s}}}}),k=async({country:e,couponCode:t,currency:r,orderItems:o=[],selectedShadowsOption:n,paymentProfileId:s,vatNumber:i,configs:d={},license:l=u.sU,debitableIdentifier:c,promotions:p,isEligibleForUnlimitedBogoPromotion:y=!1,isClickToCancelARGateEnabled:b=!1,isFootageSelect:g=!1})=>{let w=v({orderItems:o,license:l,country:e,debitableIdentifier:c,selectedShadowsOption:n,isClickToCancelARGateEnabled:b});y&&(w=m(w,g));let k=(0,a._u)().formattedUrl,O=P({country:e,couponCode:t,promotions:y?C():p,currency:r,items:w,paymentProfileId:s,vatNumber:i});return h.Bn.post(k,O,{...d,...N&&{timeout:3e4}}).then(e=>({headers:e.headers,data:(0,f.A)(e.data)}))},O=({orderItems:e=[],country:t="",debitableIdentifier:r})=>e.map(e=>{let{product:{id:a,license:s,name:i="",productType:l,eligibleForRebilling:c,seatCount:m}={},assets:p,paymentMethod:y}=e,C={...m&&{seat_count:m},...y?.type!==o.gU&&{subscription_id:y?.id}},h=[];return p?.length&&(h=p.map(({asset:e,selectedAssetSize:t})=>{let r=(0,b.OJ)(e);return{type:(0,b._$)(e),id:e.id,license:s,...r&&{format:d.mx,size:d.mx,headline:e.title},...t?.size&&{size:t.size},...t?.format&&{format:t.format}}})),C.auto_renewal=c&&l===u.PZ&&!n.F7K.includes(t)&&!n.KGB.includes(i),C.debitable_identifier=r,{product:{id:a,type:l||u.Uy},...h&&{media:h},...Object.keys(C).length>0&&{meta:C}}}),_=async({country:e,currency:t,orderItems:r,paymentProfileId:o,vatNumber:n,configs:s={},debitableIdentifier:i,promotions:d})=>{let l=O({orderItems:r,country:e,debitableIdentifier:i}),u=(0,a._u)().formattedUrl,c=P({country:e,currency:t,items:l,paymentProfileId:o,vatNumber:n,promotions:d}),m=await h.Bn.post(u,c,{...s,...N&&{timeout:3e4}});return{headers:m.headers,data:(0,f.A)(m.data)}}}}]);
//# sourceMappingURL=BuyAndDownloadButton.70a1ec7f081e1163.js.map